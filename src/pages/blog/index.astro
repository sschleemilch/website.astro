---
import Base from "@layouts/Base.astro";
import { getCollection } from "astro:content";
import BlogPosts from "@components/BlogPosts.astro";
import Lines from "@components/Lines.astro";
import H1 from "@components/H1.astro";
import Sidenote from "@components/Sidenote.astro";
import Details from "@components/Details.astro";

import accents from "@config/accents.json";

const posts = (await getCollection("posts")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const title = "Blog";
const accent = accents[title];
---

<Base title={title} accent={accent}>
  <Lines>
    <Details>len(posts)=={posts.length}</Details>
    <Sidenote accent={accent}>ALL BLOG POSTS</Sidenote>
    <Lines>
      <H1> Blog </H1>
    </Lines>
    <BlogPosts posts={posts} accent={accent} />
  </Lines>
</Base>
